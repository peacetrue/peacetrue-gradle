import java.nio.file.Files
import java.nio.file.Paths


allprojects {
    task generateFileStructure(group: "peacetrue-template") {
        doLast {
            exec {
                workingDir("${projectDir}/src/main/resources")
                commandLine("/usr/local/bin/tree")
                standardOutput = Files.newOutputStream(Paths.get("${projectDir}/../docs/antora/modules/ROOT/examples/${project.name}/file-structure.txt"))
            }
        }
    }

    task lnVariableAdoc(group: "peacetrue-template") {
        doLast {
            exec {
                workingDir("${projectDir}/../docs/antora/modules/ROOT/examples/${project.name}")
                commandLine("ln", "-s", "../../../../../../${project.name}/src/main/resources/antora-variable.adoc", "variable.adoc")
            }
        }
    }

}
